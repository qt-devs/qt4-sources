<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<!-- qhistorystate.cpp -->
<head>
  <title>Qt 4.6: QHistoryState Class Reference</title>
  <link href="classic.css" rel="stylesheet" type="text/css" />
</head>
<body>
<a name="//apple_ref/cpp/cl//QHistoryState" />
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tr>
<td align="left" valign="top" width="32"><a href="http://qt.nokia.com/"><img src="images/qt-logo.png" align="left" border="0" /></a></td>
<td width="1">&nbsp;&nbsp;</td><td class="postheader" valign="center"><a href="index.html"><font color="#004faf">Home</font></a>&nbsp;&middot; <a href="classes.html"><font color="#004faf">All&nbsp;Classes</font></a>&nbsp;&middot; <a href="functions.html"><font color="#004faf">All&nbsp;Functions</font></a>&nbsp;&middot; <a href="overviews.html"><font color="#004faf">Overviews</font></a></td></tr></table><h1 class="title">QHistoryState Class Reference<br /><span class="small-subtitle">[<a href="qtcore.html">QtCore</a> module]</span>
</h1>
<p>The QHistoryState class provides a means of returning to a previously active substate. <a href="#details">More...</a></p>
<pre> #include &lt;QHistoryState&gt;</pre><p>Inherits <a href="qabstractstate.html">QAbstractState</a>.</p>
<p>This class was introduced in Qt 4.6.</p>
<ul>
<li><a href="qhistorystate-members.html">List of all members, including inherited members</a></li>
</ul>
<hr />
<a name="public-types"></a>
<h2>Public Types</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">enum </td><td class="memItemRight" valign="bottom"><b><a href="qhistorystate.html#HistoryType-enum">HistoryType</a></b> { ShallowHistory, DeepHistory }</td></tr>
</table>
<hr />
<a name="properties"></a>
<h2>Properties</h2>
<ul>
<li><div class="fn"><b><a href="qhistorystate.html#defaultState-prop">defaultState</a></b> : QAbstractState *</div></li>
<li><div class="fn"><b><a href="qhistorystate.html#historyType-prop">historyType</a></b> : HistoryType</div></li>
</ul>
<ul>
<li><div bar="2" class="fn"></div>1 property inherited from <a href="qobject.html#properties">QObject</a></li>
</ul>
<hr />
<a name="public-functions"></a>
<h2>Public Functions</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="qhistorystate.html#QHistoryState">QHistoryState</a></b> ( QState * <i>parent</i> = 0 )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="qhistorystate.html#QHistoryState-2">QHistoryState</a></b> ( HistoryType <i>type</i>, QState * <i>parent</i> = 0 )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top"></td><td class="memItemRight" valign="bottom"><b><a href="qhistorystate.html#dtor.QHistoryState">~QHistoryState</a></b> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">QAbstractState * </td><td class="memItemRight" valign="bottom"><b><a href="qhistorystate.html#defaultState-prop">defaultState</a></b> () const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">HistoryType </td><td class="memItemRight" valign="bottom"><b><a href="qhistorystate.html#historyType-prop">historyType</a></b> () const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qhistorystate.html#defaultState-prop">setDefaultState</a></b> ( QAbstractState * <i>state</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b><a href="qhistorystate.html#historyType-prop">setHistoryType</a></b> ( HistoryType <i>type</i> )</td></tr>
</table>
<ul>
<li><div bar="2" class="fn"></div>2 public functions inherited from <a href="qabstractstate.html#public-functions">QAbstractState</a></li>
<li><div bar="2" class="fn"></div>29 public functions inherited from <a href="qobject.html#public-functions">QObject</a></li>
</ul>
<hr />
<a name="reimplemented-protected-functions"></a>
<h2>Reimplemented Protected Functions</h2>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">virtual bool </td><td class="memItemRight" valign="bottom"><b><a href="qhistorystate.html#event">event</a></b> ( QEvent * <i>e</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void </td><td class="memItemRight" valign="bottom"><b><a href="qhistorystate.html#onEntry">onEntry</a></b> ( QEvent * <i>event</i> )</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void </td><td class="memItemRight" valign="bottom"><b><a href="qhistorystate.html#onExit">onExit</a></b> ( QEvent * <i>event</i> )</td></tr>
</table>
<ul>
<li><div bar="2" class="fn"></div>3 protected functions inherited from <a href="qabstractstate.html#protected-functions">QAbstractState</a></li>
<li><div bar="2" class="fn"></div>7 protected functions inherited from <a href="qobject.html#protected-functions">QObject</a></li>
</ul>
<h3>Additional Inherited Members</h3>
<ul>
<li><div class="fn"></div>1 public slot inherited from <a href="qobject.html#public-slots">QObject</a></li>
<li><div class="fn"></div>2 signals inherited from <a href="qabstractstate.html#signals">QAbstractState</a></li>
<li><div class="fn"></div>1 signal inherited from <a href="qobject.html#signals">QObject</a></li>
<li><div class="fn"></div>5 static public members inherited from <a href="qobject.html#static-public-members">QObject</a></li>
<li><div class="fn"></div>3 protected functions inherited from <a href="qabstractstate.html#protected-functions">QAbstractState</a></li>
<li><div class="fn"></div>7 protected functions inherited from <a href="qobject.html#protected-functions">QObject</a></li>
</ul>
<a name="details"></a>
<hr />
<h2>Detailed Description</h2>
<p>The QHistoryState class provides a means of returning to a previously active substate.</p>
<p>A history state is a pseudo-state that represents the child state that the parent state was in the last time the parent state was exited. A transition with a history state as its target is in fact a transition to one of the other child states of the parent state. QHistoryState is part of <a href="statemachine-api.html">The State Machine Framework</a>.</p>
<p>Use the <a href="qhistorystate.html#defaultState-prop">setDefaultState</a>() function to set the state that should be entered if the parent state has never been entered. Example:</p>
<pre> QStateMachine machine;

 QState *s1 = new QState();
 QState *s11 = new QState(s1);
 QState *s12 = new QState(s1);

 QHistoryState *s1h = new QHistoryState(s1);
 s1h-&gt;setDefaultState(s11);

 machine.addState(s1);

 QState *s2 = new QState();
 machine.addState(s2);

 QPushButton *button = new QPushButton();
<span class="comment"> // Clicking the button will cause the state machine to enter the child state</span>
<span class="comment"> // that s1 was in the last time s1 was exited, or the history state's default</span>
<span class="comment"> // state if s1 has never been entered.</span>
 s1-&gt;addTransition(button, SIGNAL(clicked()), s1h);</pre>
<p>By default a history state is shallow, meaning that it won't remember nested states. This can be configured through the <a href="qhistorystate.html#historyType-prop">historyType</a> property.</p>
<hr />
<h2>Member Type Documentation</h2>
<a name="//apple_ref/cpp/tag/QHistoryState/HistoryType" />
<a name="//apple_ref/cpp/econst/QHistoryState/ShallowHistory" />
<a name="//apple_ref/cpp/econst/QHistoryState/DeepHistory" />
<h3 class="fn"><a name="HistoryType-enum"></a>enum QHistoryState::HistoryType</h3>
<p>This enum specifies the type of history that a <a href="qhistorystate.html">QHistoryState</a> records.</p>
<p><table class="valuelist" border="1" cellpadding="2" cellspacing="1" width="100%">
<tr><th width="25%">Constant</th><th width="15%">Value</th><th width="60%">Description</th></tr>
<tr><td valign="top"><tt>QHistoryState::ShallowHistory</tt></td><td align="center" valign="top"><tt>0</tt></td><td valign="top">Only the immediate child states of the parent state are recorded. In this case a transition with the history state as its target will end up in the immediate child state that the parent was in the last time it was exited. This is the default.</td></tr>
<tr><td valign="top"><tt>QHistoryState::DeepHistory</tt></td><td align="center" valign="top"><tt>1</tt></td><td valign="top">Nested states are recorded. In this case a transition with the history state as its target will end up in the most deeply nested descendant state the parent was in the last time it was exited.</td></tr>
</table></p>
<hr />
<h2>Property Documentation</h2>
<a name="//apple_ref/cpp/instm/QHistoryState/defaultState" />
<a name="//apple_ref/cpp/instm/QHistoryState/setDefaultState" />
<h3 class="fn"><a name="defaultState-prop"></a>defaultState : <a href="qabstractstate.html">QAbstractState</a> *</h3>
<p>This property holds the default state of this history state.</p>
<p><b>Access functions:</b></p>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">QAbstractState * </td><td class="memItemRight" valign="bottom"><b>defaultState</b> () const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b>setDefaultState</b> ( QAbstractState * <i>state</i> )</td></tr>
</table>
<a name="//apple_ref/cpp/instm/QHistoryState/historyType" />
<a name="//apple_ref/cpp/instm/QHistoryState/setHistoryType" />
<h3 class="fn"><a name="historyType-prop"></a>historyType : <a href="qhistorystate.html#HistoryType-enum">HistoryType</a></h3>
<p>This property holds the type of history that this history state records.</p>
<p>The default value of this property is <a href="qhistorystate.html#HistoryType-enum">QHistoryState::ShallowHistory</a>.</p>
<p><b>Access functions:</b></p>
<table class="alignedsummary" border="0" cellpadding="0" cellspacing="0" width="100%">
<tr><td class="memItemLeft" align="right" valign="top">HistoryType </td><td class="memItemRight" valign="bottom"><b>historyType</b> () const</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">void </td><td class="memItemRight" valign="bottom"><b>setHistoryType</b> ( HistoryType <i>type</i> )</td></tr>
</table>
<hr />
<h2>Member Function Documentation</h2>
<a name="//apple_ref/cpp/instm/QHistoryState/QHistoryState" />
<h3 class="fn"><a name="QHistoryState"></a>QHistoryState::QHistoryState ( <a href="qstate.html">QState</a> * <i>parent</i> = 0 )</h3>
<p>Constructs a new shallow history state with the given <i>parent</i> state.</p>
<h3 class="fn"><a name="QHistoryState-2"></a>QHistoryState::QHistoryState ( <a href="qhistorystate.html#HistoryType-enum">HistoryType</a> <i>type</i>, <a href="qstate.html">QState</a> * <i>parent</i> = 0 )</h3>
<p>Constructs a new history state of the given <i>type</i>, with the given <i>parent</i> state.</p>
<a name="//apple_ref/cpp/instm/QHistoryState/~QHistoryState" />
<h3 class="fn"><a name="dtor.QHistoryState"></a>QHistoryState::~QHistoryState ()</h3>
<p>Destroys this history state.</p>
<a name="//apple_ref/cpp/instm/QHistoryState/event" />
<h3 class="fn"><a name="event"></a>bool QHistoryState::event ( <a href="qevent.html">QEvent</a> * <i>e</i> )&nbsp;&nbsp;<tt> [virtual protected]</tt></h3>
<p>Reimplemented from <a href="qobject.html#event">QObject::event</a>().</p>
<a name="//apple_ref/cpp/instm/QHistoryState/onEntry" />
<h3 class="fn"><a name="onEntry"></a>void QHistoryState::onEntry ( <a href="qevent.html">QEvent</a> * <i>event</i> )&nbsp;&nbsp;<tt> [virtual protected]</tt></h3>
<p>Reimplemented from <a href="qabstractstate.html#onEntry">QAbstractState::onEntry</a>().</p>
<a name="//apple_ref/cpp/instm/QHistoryState/onExit" />
<h3 class="fn"><a name="onExit"></a>void QHistoryState::onExit ( <a href="qevent.html">QEvent</a> * <i>event</i> )&nbsp;&nbsp;<tt> [virtual protected]</tt></h3>
<p>Reimplemented from <a href="qabstractstate.html#onExit">QAbstractState::onExit</a>().</p>
<p /><address><hr /><div align="center">
<table width="100%" cellspacing="0" border="0"><tr class="address">
<td width="40%" align="left">Copyright &copy; 2009 Nokia Corporation and/or its subsidiary(-ies)</td>
<td width="20%" align="center"><a href="trademarks.html">Trademarks</a></td>
<td width="40%" align="right"><div align="right">Qt 4.6.0</div></td>
</tr></table></div></address></body>
</html>
